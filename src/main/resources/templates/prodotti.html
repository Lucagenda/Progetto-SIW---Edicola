<!DOCTYPE html>
<html>
  <head>
    <title>Catalogo</title>
    <link rel="stylesheet" href="/prodotti.css?version=5" />
    <link rel="stylesheet" href="/navbar.css" />
    <link rel="stylesheet" href="/footer.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  </head>

  <body>
      <!-- Navbar moderna -->
    <header class="navbar">
        <a class="logo" th:href="@{/}">Edicola Del Faro</a>

        <form class="search-form" th:action="@{/prodotti/ricerca}" method="get">
            <input type="text" name="nome" placeholder="Cerca prodotti..." />
            <button type="submit">
                üîç
            </button>
        </form>

    <div class="top-icons">
      <a th:if="${credenziali != null and credenziali.ruolo == 'ADMIN'}" href="/admin/ordini" title="Area Admin">
        <img src="/images/gear.png" alt="Admin Ordini" />
      </a>
      <a th:if="${credenziali != null and credenziali.ruolo != 'ADMIN'}" href="/carrello" title="Vai al carrello">
        <img src="/images/carrello.png" alt="Carrello" />
      </a>
      <a th:unless="${credenziali != null}" href="/carrello" title="Vai al carrello">
        <img src="/images/carrello.png" alt="Carrello" />
      </a>
      <a th:if="${credenziali != null and credenziali.ruolo != 'ADMIN'}" th:href="@{/messaggi}" title="Messaggi">
        <img src="/images/message.png" alt="Messaggi" style="width:28px;vertical-align:middle;" />
      </a>
      <span th:if="${credenziali != null}">
        <a th:href="@{'/utente/' + ${credenziali.id}}" title="Vai al profilo">
          <img src="/images/login.png" alt="Profilo" />
        </a>
      </span>
      <a th:unless="${credenziali != null}" href="/login" title="Accedi o registrati">
        <img src="/images/login.png" alt="Login" />
      </a>
    </div>
  </header>

    <h1>Prodotti</h1>

    <div th:if="${prodotti.isEmpty()}" style="display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:40vh;">
      <span style="font-size:2.1rem; color:#111; font-weight:700; text-align:center;">Non ci sono prodotti nel catalogo con questo nome</span>
    </div>

    <div class="prodotti-container" th:if="${not prodotti.isEmpty()}">
      <div class="prodotto-card" th:each="prodotto : ${prodotti}">
        <a th:href="@{'/prodotto/' + ${prodotto.id}}" style="display:block;text-decoration:none;color:inherit;width:100%;height:100%;">
          <span><img width="40%" th:src="${prodotto.urlImage}" /></span>
          <div class="prodotto-titolo" th:text="${prodotto.nome}">Nome prodotto</div>
          <div class="prodotto-costo" th:text="${#numbers.formatDecimal(prodotto.prezzo, 1, 'COMMA', 2, 'POINT')} + ' ‚Ç¨'">0,00 ‚Ç¨</div>
        </a>
        <form th:if="${credenziali == null or credenziali.ruolo != 'ADMIN'}" th:action="@{/carrello/aggiungi}" method="post" style="width:100%;margin-top:8px;">
          <input type="hidden" name="tipo" th:value="${prodotto.tipoProdotto}" />
          <input type="hidden" name="id" th:value="${prodotto.id}" />
          <button class="btn-aggiungi-carrello" type="submit">Aggiungi al carrello</button>
        </form>
      </div>
    </div>
    
  <footer class="footer">
        <div class="footer-content">
            <p>Edicola del Faro - Nuovi contenuti in arrivo</p>
        </div>
    </footer>

  </body>
</html>

